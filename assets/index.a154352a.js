import{_ as J,c as B,e as U}from"./index.53ebc349.js";import{E as R}from"./exportToExcel.54f0fafc.js";import{C as j}from"./correct.3e04e426.js";import{d as q,r as n,b as L,c as M,e as f,M as G,o as d,f as C,g,i as t,j as v,B as H,l as V,q as D,F as z,k as A,p as K,m as Q,h as T,t as W}from"./vendor.ce825e00.js";const X=q({components:{Correct:j},setup(l){const r=n(!1),i=n([]),b=n([]),m=n([]),k=n([]),h=n([]),y=n(1),p=n(10),s=n(1),N=n(10),w=n(0),c=n([]),O=n(0),F=n(!1),o=L(),_=M(),P=n([{value:"\u5BFC\u51FA\u5F53\u524D\u9875\u9762",label:"\u5BFC\u51FA\u5F53\u524D\u9875\u9762"},{value:"\u5168\u90E8\u5BFC\u51FA",label:"\u5168\u90E8\u5BFC\u51FA"}]),S=n("");B({page:s.value,pageValue:p.value}).then(a=>{i.value=a.data.result});const I=a=>{console.log(a),F.value=a};return U().then(a=>{c.value=a.data.res,console.log(c.value,169),w.value=JSON.parse(c.value.length),console.log(w.value),c.value.map(u=>u.stage).reduce((u,x)=>(u.indexOf(x)==-1&&u.push(x),u),[]).forEach(u=>{k.value.push({value:u,label:u})}),c.value.map(u=>u.class).reduce((u,x)=>(u.indexOf(x)==-1&&u.push(x),u),[]).forEach(u=>{h.value.push({value:u,label:u})})}),{totle:i,options:k,options2:h,value1:b,value2:m,xuan:()=>{console.log(b.value,134);let a=[];a=c.value.filter(e=>e.stage==b.value).map(e=>(console.log(e.class),e.class)).reduce((e,E)=>(e.indexOf(E)==-1&&e.push(E),e),[]),console.log(a),h.value=[],a.forEach(e=>{console.log(e),h.value.push({value:e,label:e})})},search:()=>{r.value=!0,setTimeout(async()=>{let a=[];c.value.map(e=>{e.stage===b.value&&e.class===m.value&&(console.log(e),a.push(e),i.value=a)}),r.value=!1},1e3)},handleSizeChange:a=>{p.value=a,B({page:s.value,pageValue:p.value}).then(e=>{console.log(e.data.result),i.value=e.data.result})},handleCurrentChange:a=>{s.value=a,console.log(s.value),B({page:s.value,pageValue:p.value}).then(e=>{i.value=e.data.result,console.log(i.value)})},currentPage4:y,pageSize4:p,page:s,num:w,pageValue:N,searchArr:c,loading:r,chong:()=>{r.value=!0,setTimeout(async()=>{b.value=[],m.value=[],i.value=[],B({page:s.value,pageValue:p.value}).then(a=>{i.value=a.data.result}),r.value=!1},1e3)},exportExcel:()=>{const a=new R;S.value=="\u5168\u90E8\u5BFC\u51FA"?a.exportAsExcelFile(c.value," \u5168\u90E8\u6210\u7EE9\u8868"):S.value=="\u5BFC\u51FA\u5F53\u524D\u9875\u9762"&&a.exportAsExcelFile(i.value," \u5F53\u524D\u9875\u6210\u7EE9\u8868")},dao:P,daoExcel:()=>{console.log(S.value)},daoValue:S,index:O,look:a=>{r.value=!0,console.log(a),setTimeout(()=>{F.value=!0,r.value=!1,o.commit("AnswerSheet/getStudentPaper",a)},1e3)},flag:F,close:()=>{setTimeout(()=>{F.value=!1},1e3)},setcorrectFlag:I,fan:()=>{console.log(m.value,2121);let a=[];a=c.value.filter(e=>e.class==m.value).map(e=>(console.log(e.class),e.stage)).reduce((e,E)=>(e.indexOf(E)==-1&&e.push(E),e),[]),console.log(a),k.value=[],a.forEach(e=>{console.log(e),k.value.push({value:e,label:e})})},route:_}}}),$=l=>(K("data-v-3189e62c"),l=l(),Q(),l),Y=A(" \xA0\xA0 "),Z={class:"students"},ee=A(" \xA0\xA0\xA0\xA0"),le={class:"search"},ae=$(()=>g("span",null,"\u5B66\u79D1:",-1)),oe=$(()=>g("span",null,"\u73ED\u7EA7:",-1)),ue=A("\u67E5\u8BE2"),te=A("\u91CD\u7F6E"),se=A("\u5BFC\u51FA\u8868\u683C"),ne={key:0,class:"mc"},re={class:"bigBox"},ce={class:"box"},de={class:"table"},ie={key:0,class:"red"},pe={key:1,class:"red"},ve={key:2},ge=A("\u67E5\u770B"),he={class:"yema"},_e={class:"demo-pagination-block"};function fe(l,r,i,b,m,k){const h=f("el-option"),y=f("el-select"),p=f("el-button"),s=f("el-table-column"),N=f("el-tag"),w=f("el-table"),c=f("el-pagination"),O=f("Correct"),F=G("loading");return d(),C(z,null,[Y,g("div",Z,[ee,g("div",le,[ae,t(y,{modelValue:l.value1,"onUpdate:modelValue":r[0]||(r[0]=o=>l.value1=o),placeholder:"\u8BF7\u9009\u62E9",onChange:l.xuan},{default:v(()=>[(d(!0),C(z,null,T(l.options,o=>(d(),D(h,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),oe,t(y,{modelValue:l.value2,"onUpdate:modelValue":r[1]||(r[1]=o=>l.value2=o),"multiplecollapse-tagsstyle":"margin-left: 20px",placeholder:"\u5E74\u7EA7",onChange:l.fan},{default:v(()=>[(d(!0),C(z,null,T(l.options2,o=>(d(),D(h,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(p,{type:"primary",class:"but cha",onClick:l.search,disabled:l.value1==""&&l.value2==""},{default:v(()=>[ue]),_:1},8,["onClick","disabled"]),t(p,{type:"primary",class:"but",onClick:l.chong},{default:v(()=>[te]),_:1},8,["onClick"]),t(y,{modelValue:l.daoValue,"onUpdate:modelValue":r[2]||(r[2]=o=>l.daoValue=o),placeholder:"\u5BFC\u51FA\u8868\u683C",class:"export",onChange:l.daoExcel},{default:v(()=>[(d(!0),C(z,null,T(l.dao,o=>(d(),D(h,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(p,{type:"primary",class:"dao",onClick:l.exportExcel},{default:v(()=>[se]),_:1},8,["onClick"]),l.loading==!0?H((d(),C("div",ne,null,512)),[[F,l.loading]]):V("",!0)]),g("div",re,[g("div",ce,[g("div",de,[t(w,{ref:"tableRef","row-key":"date",data:l.totle,style:{width:"100%"},border:!0,stripe:!0,"max-height":500,fit:!0,"highlight-current-row":!0,"default-sort":{prop:"minute"}},{default:v(()=>[t(s,{prop:"id",label:"id",width:"150"}),t(s,{prop:"student",label:"\u5B66\u751F\u540D\u79F0",width:"220"}),t(s,{prop:"stage",label:"\u4E13\u4E1A",width:"150"}),t(s,{prop:"class",label:"\u73ED\u7EA7",width:"150"}),t(s,{prop:"view",label:"\u5F55\u5C4F",width:"350"}),t(s,{prop:"submitDay",label:"\u63D0\u4EA4\u65F6\u95F4",width:"260"}),t(s,{prop:"list",label:"\u5206\u6570",width:"100",sortable:"","filter-placement":"bottom-end"},{default:v(o=>[o.row.text==2?(d(),C("p",ie,"\u5F55\u5C4F\u4F5C\u5F0A")):V("",!0),JSON.parse(o.row.list).length<=0&&o.row.text=="1"?(d(),C("p",pe,"\u4F5C\u5F0A")):V("",!0),JSON.parse(o.row.list).length>0&&o.row.text=="1"?(d(),C("p",ve,W(JSON.parse(o.row.list).filter(_=>_.hasOwnProperty("score")).map(_=>_.score).reduce((_,P)=>_+=Number(P),0)),1)):V("",!0)]),_:1}),t(s,{prop:"text",label:"\u64CD\u4F5C",width:"210"},{default:v(o=>[t(N,{"disable-transitions":"",onClick:_=>l.look(o.row)},{default:v(()=>[ge]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",he,[g("div",_e,[t(c,{currentPage:"currentPage4","page-size":"pageSize4","page-sizes":[5,10,15],small:!0,height:100,disabled:!0,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:l.num,onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["total","onSizeChange","onCurrentChange"])])])])]),l.flag?(d(),D(O,{key:0,setcorrectFlag:l.setcorrectFlag},null,8,["setcorrectFlag"])):V("",!0)])],64)}var ze=J(X,[["render",fe],["__scopeId","data-v-3189e62c"]]);export{ze as default};
